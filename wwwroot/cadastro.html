<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Cadastro de Produto</title>
    <!-- =============================== -->
    <!-- Estilos da página -->
    <!-- =============================== -->
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        form { max-width: 400px; margin: auto; }
        label { display: block; margin-top: 16px; }
        input[type="text"], input[type="number"] { width: 100%; padding: 8px; margin-top: 4px; }
        button { margin-top: 20px; padding: 10px 20px; }
    </style>
</head>
<body>
    <h1>Cadastro de Produto</h1>
    <a href="index.html"><button style="margin-bottom:20px; padding:8px;">Voltar para Index</button></a>
    <!-- =============================== -->
    <!-- Formulário de cadastro -->
    <!-- =============================== -->
    <form>
        <label for="nome">Nome do Produto:</label>
        <input type="text" id="nome" name="nome" required>

        <label for="preco">Preço:</label>
        <input type="number" id="preco" name="preco" step="0.01" required>

        <button type="submit">Cadastrar</button>
    </form>
    <!-- =============================== -->
    <!-- Script para exibir mensagem de cadastro -->
    <!-- =============================== -->
    <script>
        // ===============================
        // Envio do cadastro para a API
        // ===============================
        document.querySelector('form').addEventListener('submit', function(e) {
            e.preventDefault();
            const nome = document.getElementById('nome').value;
            const preco = parseFloat(document.getElementById('preco').value);
            fetch('http://' + window.location.hostname + ':5217/produtos', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ nome, preco })
            })
            .then(response => {
                if (response.ok) {
                    alert('Produto cadastrado com sucesso!');
                    document.querySelector('form').reset();
                } else {
                    alert('Erro ao cadastrar produto.');
                }
            })
            .catch(() => {
                alert('Erro ao conectar com a API.');
            });
        });
    </script>
</body>
</html>
